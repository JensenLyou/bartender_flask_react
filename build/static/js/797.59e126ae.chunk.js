"use strict";(self.webpackChunkbartender_frontend=self.webpackChunkbartender_frontend||[]).push([[797],{5797:function(t,n,e){e.r(n),e.d(n,{default:function(){return X}});var r=e(4165),o=e(5861),i=e(9439),s=e(168),a=e(1413),c=e(6573),l=[500,400,551,560,800],u=c.Z.create({timeout:12e4});u.interceptors.request.use((function(t){return"get"===t.method&&(t.data={}),t}),(function(t){return console.warn(t),Promise.reject(t)})),u.interceptors.response.use((function(t){var n=t.data,e=n.code,r=n.message;return l.includes(e)&&console.error(r),n}),(function(t){return Promise.reject(t)}));var p,d,f,g,m,x=u,h=function(){var t=(0,o.Z)((0,r.Z)().mark((function t(n){var e;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,x({url:"/v1/chat",data:(0,a.Z)({},n),method:"post"});case 2:return e=t.sent,t.abrupt("return",e);case 4:case"end":return t.stop()}}),t)})));return function(n){return t.apply(this,arguments)}}(),v=e(1961),w=e(8792),y=e(5045),b=e(5386),Z=e(6417),j=(0,v.zo)("div")(p||(p=(0,s.Z)(["\n\tpadding-top: 120px;\n\tflex: 1;\n\tdisplay: flex;\n\tflex-direction: column;\n"]))),k=(0,v.zo)("h2")(d||(d=(0,s.Z)(["\n\tfont-size: 38px;\n\tcolor: #333;\n\tfont-weight: 600;\n\tdisplay: flex;\n\talign-items: center;\n\tflex-wrap: wrap;\n\tfont-family: PingFang SC-Semibold, PingFang SC;\n\timg {\n\t\twidth: 60px;\n\t}\n"]))),z=(0,v.zo)("div")(f||(f=(0,s.Z)(["\n\tfont-size: 16px;\n\tcolor: #26334b;\n\tmargin-top: 4px;\n\tspan {\n\t\tpadding: 2px 8px;\n\t\tborder: 1px solid #26334b;\n\t\tborder-radius: 4px;\n\t}\n\ta {\n\t\tcolor: #1677ff;\n\t}\n"]))),T=(0,v.zo)("div")(g||(g=(0,s.Z)(["\n\tmargin-top: 50px;\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: space-between;\n\tgap: 12px;\n\tflex-flow: wrap;\n"]))),C=(0,v.zo)("div")(m||(m=(0,s.Z)(["\n\tmin-width: 212px;\n\tmin-height: 138px;\n\tflex: 1;\n\tpadding: 16px;\n\tborder-radius: 12px;\n\tbackground-color: #f5f5f5;\n\timg {\n\t\twidth: 24px;\n\t\tmargin-bottom: 12px;\n\t}\n\th3 {\n\t\tfont-size: 16px;\n\t\tmargin-bottom: 5px;\n\t\tcolor: #26334b;\n\t\tfont-weight: 700;\n\t}\n\tdiv {\n\t\tfont-size: 12px;\n\t\tcolor: #26334b;\n\t}\n"])));var H,P,A,S,_,D,Y,B,I=function(){return(0,Z.jsxs)(j,{children:[(0,Z.jsxs)(k,{children:[(0,Z.jsx)("img",{src:"https://www.imageoss.com/images/2023/04/23/robot-logo4987eb2ca3f5ec85.png",alt:""}),"Bartender NPC MVP for Gaggle Studio"]}),(0,Z.jsx)(z,{children:'We noticed that sometimes the bartender will not output a response upon entering a prompt. We suggest you "clear" again, or wait a few minutes before trying again."'}),(0,Z.jsxs)(z,{style:{marginTop:"10px"},children:["Please reference"," ",(0,Z.jsx)("a",{href:"https://docs.google.com/document/d/1-odQBPK6H4IpT_ew5HAZgke4mhWsGJvi5d0SIHznK5Y/edit",target:"_blank",rel:"noreferrer",children:"this link"})," ","for capabilities/limitations and general overview"]}),(0,Z.jsx)(T,{children:[{id:"cuanxieduanwen",icon:"https://www.imageoss.com/images/2023/04/23/Frame2x132f6276a56cf44e81.png",name:"Instructions and Commands",descList:["Please clear memory before you start.",'Type "toggleThoughts" to turn on/off thought prompts','Type "clear" to clear memory',"Please clear memory after you are done with the session.","Type \"viewMemory: {'username'}\" to view past conversation history\n\t\t\t\twith a user"]}].map((function(t){return(0,Z.jsxs)(C,{children:[(0,Z.jsx)("img",{src:t.icon,alt:""}),(0,Z.jsx)("h3",{children:t.name}),(0,Z.jsx)("div",{children:t.descList.map((function(t,n){return(0,Z.jsx)("p",{children:"".concat(n+1,". ").concat(t)})}))})]},t.id)}))})]})},M=e(5554),E=e(7313),L=e(816),R=e.n(L),F=(0,v.zo)("div")(H||(H=(0,s.Z)(["\n\tdisplay: flex;\n\tmargin-top: 12px;\n"]))),G=(0,v.zo)("img")(P||(P=(0,s.Z)(["\n\twidth: 34px;\n\theight: 34px;\n\tborder-radius: 50%;\n"]))),K=(0,v.zo)("div")(A||(A=(0,s.Z)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\twidth: calc(100% - 42px);\n"]))),W=(0,v.zo)("span")(S||(S=(0,s.Z)(["\n\tmargin-top: 4px;\n\tmargin-bottom: 4px;\n\tfont-size: 12px;\n\tcolor: #999;\n"]))),N=(0,v.zo)("div")(_||(_=(0,s.Z)(["\n\tmax-width: calc(100% - 42px);\n\tdisplay: inline-block;\n\tpadding: 12px;\n\n\t&.left {\n\t\tmargin-right: auto;\n\t\tbackground-color: #f4f6f8;\n\t\tborder-top-left-radius: 2px;\n\t\tborder-top-right-radius: 12px;\n\t\tborder-bottom-left-radius: 12px;\n\t\tborder-bottom-right-radius: 12px;\n\t}\n\t&.right {\n\t\tmargin-left: auto;\n\t\tbackground-color: #cdeeff;\n\t\tborder-top-left-radius: 12px;\n\t\tborder-top-right-radius: 2px;\n\t\tborder-bottom-left-radius: 12px;\n\t\tborder-bottom-right-radius: 12px;\n\t}\n"]))),q=function(t){var n=t.position,e=t.text,r=t.time;return(0,Z.jsxs)(F,{style:{justifyContent:"right"===n?"flex-end":"flex-start"},children:["left"===n&&(0,Z.jsx)(G,{style:{marginRight:8},src:"https://cdn.jsdelivr.net/gh/duogongneng/testuitc/svg-1681898659579.svg"}),(0,Z.jsxs)(K,{children:[(0,Z.jsx)(W,{style:{textAlign:"right"===n?"right":"left"},children:r}),(0,Z.jsx)(N,{className:"right"===n?"right":"left",children:(0,Z.jsx)("div",{dangerouslySetInnerHTML:{__html:e}})})]}),"right"===n&&(0,Z.jsx)(G,{style:{marginLeft:8},src:"https://cdn.jsdelivr.net/gh/duogongneng/testuitc/1682426702646avatarf3db669b024fad66-1930929abe2847093.png"})]})},J=(0,E.memo)(q),Q=w.Z.TextArea,V=(0,v.zo)("div")(D||(D=(0,s.Z)(["\n\tdisplay: flex;\n\tflex-direction: column;\n\talign-items: center;\n\tjustify-content: center;\n\tgap: 10px;\n\tmax-width: 900px;\n\theight: calc(100vh - 56px);\n\tpadding: 10px 20px;\n\tmargin: 0 auto;\n"]))),O=(0,v.zo)("div")(Y||(Y=(0,s.Z)(["\n\tflex: 1;\n\twidth: 100%;\n\tmax-width: 900px;\n\talign-self: center;\n\toverflow: auto;\n\t&::-webkit-scrollbar {\n\t\tdisplay: none;\n\t}\n"]))),U=(0,v.zo)("div")(B||(B=(0,s.Z)(["\n\twidth: 100%;\n\tdisplay: flex;\n\tjustify-content: center;\n\talign-items: center;\n\tgap: 10px;\n"]))),X=function(){var t=(0,E.useRef)(null),n=function(t){var n=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t&&(t.scrollTop=t.scrollHeight);case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),e=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t&&(t.scrollTop=0);case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),i=function(){var n=(0,o.Z)((0,r.Z)().mark((function n(){return(0,r.Z)().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:t&&t.scrollHeight-t.scrollTop-t.clientHeight<=100&&(t.scrollTop=t.scrollHeight);case 1:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}();return{scrollElement:t,scrollToBottom:n,scrollToTop:e,scrollToBottomIfAtBottom:i}}(t.current),e=n.scrollToBottomIfAtBottom,s=n.scrollToBottom,a=(0,M.v9)((function(t){return{messages:t.chats.messages}})).messages,c=(0,M.I0)(),l=(0,E.useState)(""),u=(0,i.Z)(l,2),p=u[0],d=u[1],f=(0,E.useState)(!1),g=(0,i.Z)(f,2),m=g[0],x=g[1];console.log("messages:",a);var v=(0,E.useCallback)((0,o.Z)((0,r.Z)().mark((function t(){var n,e,o,i;return(0,r.Z)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return x(!0),n=R()().format("YYYY-MM-DD HH:mm:ss"),c({type:"ADD_CHAT",value:{time:n,content:p,role:"user"}}),t.prev=4,t.next=7,h({user_input:p});case 7:(e=t.sent)&&e.result&&(o=R()().format("YYYY-MM-DD HH:mm:ss"),i={time:o,content:e.result,role:"assistant"},c({type:"ADD_CHAT",value:i}),x(!1)),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(4),console.log("error:",t.t0),x(!1);case 15:case"end":return t.stop()}}),t,null,[[4,11]])}))),[c,p]);return(0,E.useLayoutEffect)((function(){t&&s()}),[t,a,s]),(0,Z.jsxs)(V,{children:[(0,Z.jsxs)(O,{ref:t,children:[a.map((function(t,n){return(0,Z.jsx)(J,{position:"user"===t.role?"right":"left",text:t.content,time:t.time},n)})),a.length<=0&&(0,Z.jsx)(I,{})]}),(0,Z.jsxs)(U,{children:[(0,Z.jsx)(y.ZP,{size:"large",icon:(0,Z.jsx)(b.Z,{}),onClick:function(){c({type:"CLEAR_CHAT"})}}),(0,Z.jsx)(Q,{size:"large",value:p,placeholder:"Say something...",autoSize:{minRows:1,maxRows:5},style:{width:"100%"},onPressEnter:function(t){"Enter"===t.key&&13===t.keyCode&&t.shiftKey||"Enter"===t.key&&13===t.keyCode&&(p.length>0&&(v(),e(),d("")),t.preventDefault())},onChange:function(t){d(t.target.value)}}),(0,Z.jsx)(y.ZP,{type:"primary",size:"large",loading:m,onClick:function(){v(),e(),d("")},children:m?"Generating":"Send"})]})]})}}}]);